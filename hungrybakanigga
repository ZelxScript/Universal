local Players=game:GetService("Players")
local TweenService=game:GetService("TweenService")
local UIS=game:GetService("UserInputService")
local lp=Players.LocalPlayer

local ZelxLib={}

local gui=Instance.new("ScreenGui")
gui.Name="ZelxLib"
gui.ResetOnSpawn=false
gui.IgnoreGuiInset=true
gui.Parent=lp:WaitForChild("PlayerGui")

local toggleBtn=Instance.new("TextButton")
toggleBtn.Size=UDim2.fromOffset(48,48)
toggleBtn.Position=UDim2.fromScale(0.03,0.5)
toggleBtn.AnchorPoint=Vector2.new(0,0.5)
toggleBtn.Text="Z"
toggleBtn.Font=Enum.Font.GothamBold
toggleBtn.TextSize=20
toggleBtn.BackgroundColor3=Color3.fromRGB(30,30,30)
toggleBtn.TextColor3=Color3.new(1,1,1)
toggleBtn.Parent=gui
Instance.new("UICorner",toggleBtn).CornerRadius=UDim.new(1,0)

local main=Instance.new("Frame")
main.Size=UDim2.fromScale(0.8,0.75)
main.Position=UDim2.fromScale(0.5,0.5)
main.AnchorPoint=Vector2.new(0.5,0.5)
main.BackgroundColor3=Color3.fromRGB(18,18,18)
main.Parent=gui
Instance.new("UICorner",main).CornerRadius=UDim.new(0,18)

local top=Instance.new("TextLabel")
top.Size=UDim2.new(1,0,0,50)
top.BackgroundTransparency=1
top.TextColor3=Color3.new(1,1,1)
top.Font=Enum.Font.GothamBold
top.TextSize=18
top.TextXAlignment=Left
top.Parent=main

local tabs=Instance.new("Frame")
tabs.Size=UDim2.new(0,140,1,-50)
tabs.Position=UDim2.new(0,0,0,50)
tabs.BackgroundColor3=Color3.fromRGB(22,22,22)
tabs.Parent=main

local tabLayout=Instance.new("UIListLayout",tabs)
tabLayout.Padding=UDim.new(0,6)

local pages=Instance.new("Frame")
pages.Size=UDim2.new(1,-140,1,-50)
pages.Position=UDim2.new(0,140,0,50)
pages.BackgroundTransparency=1
pages.Parent=main

local function tween(o,p,t)
	TweenService:Create(o,TweenInfo.new(t,Enum.EasingStyle.Quint,Enum.EasingDirection.Out),p):Play()
end

local open=true
toggleBtn.MouseButton1Click:Connect(function()
	open=not open
	tween(main,{Size=open and UDim2.fromScale(0.8,0.75) or UDim2.fromScale(0,0)},0.25)
end)

function ZelxLib:CreateWindow(cfg)
	top.Text="  "..(cfg.Name or "Window")
	local Window={}

	function Window:CreateTab(name)
		local tabBtn=Instance.new("TextButton")
		tabBtn.Size=UDim2.new(1,-12,0,40)
		tabBtn.Text=name
		tabBtn.Font=Enum.Font.Gotham
		tabBtn.TextSize=14
		tabBtn.BackgroundColor3=Color3.fromRGB(30,30,30)
		tabBtn.TextColor3=Color3.new(1,1,1)
		tabBtn.Parent=tabs
		Instance.new("UICorner",tabBtn).CornerRadius=UDim.new(0,10)

		local page=Instance.new("ScrollingFrame")
		page.Size=UDim2.fromScale(1,1)
		page.CanvasSize=UDim2.new(0,0,0,0)
		page.ScrollBarImageTransparency=1
		page.Visible=false
		page.Parent=pages

		local layout=Instance.new("UIListLayout",page)
		layout.Padding=UDim.new(0,10)
		layout.HorizontalAlignment=Center

		layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
			page.CanvasSize=UDim2.new(0,0,0,layout.AbsoluteContentSize.Y+20)
		end)

		tabBtn.MouseButton1Click:Connect(function()
			for _,v in ipairs(pages:GetChildren()) do
				if v:IsA("ScrollingFrame") then v.Visible=false end
			end
			page.Visible=true
		end)

		local Tab={}

		function Tab:AddSection(cfg)
			local s=Instance.new("TextLabel")
			s.Size=UDim2.new(1,-20,0,30)
			s.Text=cfg.Name or "Section"
			s.TextXAlignment=Left
			s.Font=Enum.Font.GothamBold
			s.TextSize=16
			s.TextColor3=Color3.new(1,1,1)
			s.BackgroundTransparency=1
			s.Parent=page
		end

		function Tab:AddButton(cfg)
			local b=Instance.new("TextButton")
			b.Size=UDim2.new(1,-20,0,44)
			b.Text=cfg.Name
			b.Font=Enum.Font.Gotham
			b.TextSize=14
			b.BackgroundColor3=Color3.fromRGB(35,35,35)
			b.TextColor3=Color3.new(1,1,1)
			b.Parent=page
			Instance.new("UICorner",b).CornerRadius=UDim.new(0,12)
			b.MouseButton1Click:Connect(cfg.Callback or function() end)
		end

		function Tab:AddToggle(cfg)
			local state=false
			local t=Instance.new("TextButton")
			t.Size=UDim2.new(1,-20,0,44)
			t.Text=cfg.Name
			t.Font=Enum.Font.Gotham
			t.TextSize=14
			t.BackgroundColor3=Color3.fromRGB(35,35,35)
			t.TextColor3=Color3.new(1,1,1)
			t.Parent=page
			Instance.new("UICorner",t).CornerRadius=UDim.new(0,12)

			t.MouseButton1Click:Connect(function()
				state=not state
				tween(t,{BackgroundColor3=state and Color3.fromRGB(70,120,255) or Color3.fromRGB(35,35,35)},0.2)
				if cfg.Callback then cfg.Callback(state) end
			end)
		end

		function Tab:AddInput(cfg)
			local box=Instance.new("TextBox")
			box.Size=UDim2.new(1,-20,0,44)
			box.PlaceholderText=cfg.Name or "Input"
			box.Text=""
			box.Font=Enum.Font.Gotham
			box.TextSize=14
			box.BackgroundColor3=Color3.fromRGB(35,35,35)
			box.TextColor3=Color3.new(1,1,1)
			box.Parent=page
			Instance.new("UICorner",box).CornerRadius=UDim.new(0,12)
			box.FocusLost:Connect(function()
				if cfg.Callback then cfg.Callback(box.Text) end
			end)
		end

		function Tab:AddParagraph(cfg)
			local p=Instance.new("TextLabel")
			p.Size=UDim2.new(1,-20,0,0)
			p.AutomaticSize=Enum.AutomaticSize.Y
			p.TextWrapped=true
			p.TextXAlignment=Left
			p.TextYAlignment=Top
			p.Text=cfg.Text or ""
			p.Font=Enum.Font.Gotham
			p.TextSize=14
			p.TextColor3=Color3.new(1,1,1)
			p.BackgroundTransparency=1
			p.Parent=page
		end

		function Tab:AddDropdown(cfg)
			local d=Instance.new("TextButton")
			d.Size=UDim2.new(1,-20,0,44)
			d.Text=cfg.Name
			d.Font=Enum.Font.Gotham
			d.TextSize=14
			d.BackgroundColor3=Color3.fromRGB(35,35,35)
			d.TextColor3=Color3.new(1,1,1)
			d.Parent=page
			Instance.new("UICorner",d).CornerRadius=UDim.new(0,12)
			d.MouseButton1Click:Connect(function()
				if cfg.Callback and cfg.Options then
					cfg.Callback(cfg.Options[1])
				end
			end)
		end

		return Tab
	end

	return Window
end

return ZelxLib
